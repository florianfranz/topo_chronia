<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TopoChronia &#8212; TopoChronia  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/open_links.js?v=72f6f293"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="topochronia">
<h1>TopoChronia<a class="headerlink" href="#topochronia" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id4">Installation</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#check-configuration" id="id6">Check Configuration</a></p></li>
<li><p><a class="reference internal" href="#create-node-grid" id="id7">Create Node Grid</a></p></li>
<li><p><a class="reference internal" href="#interpolate-raster" id="id8">Interpolate Raster</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#contributing" id="id9">Contributing</a></p></li>
<li><p><a class="reference internal" href="#license" id="id10">License</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>Welcome to the documentation for <a class="reference external" href="https://github.com/florianfranz/topo_chronia">TopoChronia</a>. This guide will help you get started and provides a step-by-step guide
to process raw input PANALESIS data into fully quantified palaeotopographic maps for the entire Phanerozoic.</p>
</section>
<section id="installation">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>To install the plugin, go to the <a class="reference external" href="https://github.com/florianfranz/topo_chronia/blob/master/releases/new">releases folder</a>
and download the zip folder.</p>
<p>Once downloaded, open QGIS and click on “Plugins” → “Manage and Install Plugins”.</p>
<a class="reference internal image-reference" href="_images/qgis_inst_plugin.png"><img alt="Description of the image" class="align-center" src="_images/qgis_inst_plugin.png" style="width: 400px;" />
</a>
<p>The plugin manager window will open. On the left pane, select “Install from ZIP”, then browse to where the .zip folder
was downloaded in the previous step. Select the topo_chronia.zip file and finally click on “Install Plugin”.</p>
<a class="reference internal image-reference" href="_images/qgis_inst_zip.png"><img alt="Description of the image" class="align-center" src="_images/qgis_inst_zip.png" style="width: 700px;" />
</a>
<p>After clicking on “Install Plugin”, a green message box should appear on top notifying you that the install was
successful.</p>
<p><strong>Note:</strong> This plugin uses external libraries, such as geopy which is included within the plugin itself under
<a class="reference external" href="https://github.com/florianfranz/topo_chronia/blob/master/ext_libraries">external libraries folder</a>.
Other libraries might cause trouble depending on your Python version and dependencies.
These libraries are listed in the <a class="reference external" href="https://github.com/florianfranz/topo_chronia/blob/master/requirements.txt">requirements</a>.
and can be installed using the OSGeo4W Shell (Windows) or in the standard Python installation for macOS and Linux.</p>
<p>If successful, your toolbar should have three new icons, representing the three TopoChronia phases:</p>
<a class="reference internal image-reference" href="_images/three_icons.png"><img alt="Description of the image" class="align-center" src="_images/three_icons.png" style="width: 400px;" />
</a>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Phase 0: Check Configuration.</strong> This phase is to ensure that all input data and variables are in the correct format so they can be used seamlessly.</p></li>
<li><p><strong>Phase I: Create Node Grid.</strong> This phase converts input data from feature types, plate boundaries and others into a node grid raster file.</p></li>
<li><p><strong>Phase II: Interpolate Raster.</strong> This final phase creates the topographic raster and calculates sea-level variations.</p></li>
</ul>
<p>You can access each phase by clicking on the respective icon. Alternatively, you can always access the TopoChronia
functionalities by going to the “Plugins” in the upper ribbon and clicking on “TopoChronia”.</p>
<section id="check-configuration">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Check Configuration</a><a class="headerlink" href="#check-configuration" title="Link to this heading">¶</a></h3>
<p>For demo purposes, input files for the 444 Ma reconstruction have been added to this repository. Go to the
<a class="reference external" href="https://github.com/florianfranz/topo_chronia/blob/master/data">data folder</a> and download the “PAN_data_444.zip”.
This folder contains the Plate Model (PM), the Plate Polygons (PP), the Continent-Ocean Boundary Polygons (COB), the
Geodesic Grid Points and the Global Average Accretion Velocities table.</p>
<p>Once downloaded, unzip the folder and load the layers in QGIS, including the Global Average Accretion Velocities table
(for the latter, only add the “Accretion Rates”, we will not need the “Recon Data”).</p>
<p>As we are going to use many different input files to run our reconstructions, we need to make sure that everything
aligns with the requirements of the model. We are therefore going to perform some configuration checks on the input
data that will inspect that:</p>
<ul class="simple">
<li><p>Geometries are correct.</p></li>
<li><p>Required attributes are present.</p></li>
<li><p>No attributes contain invalid values, blanks, or “None”.</p></li>
<li><p>Ages for reconstructions are all listed.</p></li>
</ul>
<p>Click on the green check icon to start. A dialog box opens that will allow to check the relevant input data:</p>
<a class="reference internal image-reference" href="_images/check_conf.png"><img alt="Description of the image" class="align-center" src="_images/check_conf.png" style="width: 700px;" />
</a>
<p>Here, the PM file is missing the field “AGE”, which we will need to match with another field that might have another name.
(We assume the field exists, it just has the wrong name). To correct this, we will edit the input layer to change the
field name. Click on the “Match Fields” button. A new dialog will open:</p>
<a class="reference internal image-reference" href="_images/match_fields.png"><img alt="Description of the image" class="align-center" src="_images/match_fields.png" style="width: 700px;" />
</a>
<p>Here, you can select the field that matches the required “AGE” field in a dropdown menu. In our case, for some reason,
the field was wrongly named “AGE_1”. Select it and click on “Match Fields”. The layer will be edited to have the field
renamed to “AGE”. You should see a success message appearing:</p>
<a class="reference internal image-reference" href="_images/matched.png"><img alt="Description of the image" class="align-center" src="_images/matched.png" style="width: 700px;" />
</a>
<p>Click on “OK” and go back to the check configuration window. Now, clicking again on “Check” will render a success
message, confirming that all checks have been passed.</p>
<p>One last step before finishing this phase, select an output folder location: this is where all outputs will be stored.</p>
<p>Once all checks are passed, we now have the option to move to Phase I: Create Node Grid. In order to avoid the need to
repeat all checks every time, the results of this phase are stored in a “input_files.txt” in the default folder of QGIS,
typically:</p>
<ul class="simple">
<li><p>For Windows: C://Users/YourUsername/Documents</p></li>
<li><p>For macOS: /Users/YourUsername/Documents</p></li>
<li><p>For Linux: /home/yourusername/Documents</p></li>
</ul>
<p>In this file, all paths to the input layers are listed in a json dictionary as follows (with your own path for each
layer):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Plate Model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/PM/LAYER&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Plate Polygons&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/PP/LAYER&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Continent Polygons&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/COB/LAYER&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Geodesic Grid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/GEODESIC/GRID/LAYER&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Accretion Rates&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/ACCRETION/RATES/TABLE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Output Folder&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATH/TO/YOUR/OUTPUT/FOLDER&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We are now all set to start the node grid creation. Click on “Go to Next Phase”.</p>
</section>
<section id="create-node-grid">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Create Node Grid</a><a class="headerlink" href="#create-node-grid" title="Link to this heading">¶</a></h3>
<p>A new dialog will open:</p>
<a class="reference internal image-reference" href="_images/create_node_grid.png"><img alt="Description of the image" class="align-center" src="_images/create_node_grid.png" style="width: 700px;" />
</a>
<p>This phase is the longest and requires a few steps. First, click on “Create Age List”. This will check what
reconstruction ages are common to the input layers (PM, PP and COB). in our case, we only have the 444 Ma age, which is
displayed with its stratigraphic stage name, based on the <a class="reference external" href="https://stratigraphy.org/ICSchart/ChronostratChart2024-12.pdf">International Chronographic Chart of December 2024
(International Commission on Stratigraphy)</a></p>
<a class="reference internal image-reference" href="_images/age_list.png"><img alt="Description of the image" class="align-center" src="_images/age_list.png" style="width: 400px;" />
</a>
<p>Click on the desired age, and then click on “Prepare Data”. This will create two layers in your output folders, which
are the continent and plate polygons for the selected age only, that will be used later on during the nodes creation (for
instance to check for intersections). Once completed (it should take a minute or so), the progress bar should show 100%.</p>
<p>The next phase is the conversion from lines (extracted from the PM) into nodes with elevation. It may take up to 1 hours
to process everything. In order, clicking on the “Convert Features” button will perform the following operations:</p>
<ul class="simple">
<li><p>Select lines (extract all lines from the PM for all features, harmonize vertices density and, if needed, create polygons for specific settings, such as hot-spots and cratons)</p></li>
<li><p>Ridges (RID) to nodes</p></li>
<li><p>Isochron (ISO) to nodes</p></li>
<li><p>Preliminary raster interpolation (only using ridge and isochron nodes)</p></li>
</ul>
<p>Then, once the preliminary raster is interpolated, the remaining features are processed in parallel, using threads:</p>
<ul class="simple">
<li><p>Lower subduction (LWS) to nodes</p></li>
<li><p>Abandoned arc (ABA) to nodes</p></li>
<li><p>Passive margin wedge (PMW) to nodes</p></li>
<li><p>Continent (CTN) to nodes</p></li>
<li><p>Craton (CRA) to nodes</p></li>
<li><p>Other margin (OTM) to nodes</p></li>
<li><p>Passive margin continent (PMC) to nodes</p></li>
<li><p>Rift and basins (RIB) to nodes</p></li>
<li><p>Upper subduction (UPS) to nodes</p></li>
<li><p>Collision (COL) to nodes</p></li>
<li><p>Hot-spots (HOT) to nodes</p></li>
</ul>
<p>The result are stored in nodes layer per setting with the reconstruction age, e.g. “RID_nodes_444.geojson”. For now,
no checks for intersection or overlap between different settings have been made, and the nodes look like this:</p>
<a class="reference internal image-reference" href="_images/setting_nodes.png"><img alt="Description of the image" class="align-center" src="_images/setting_nodes.png" style="width: 600px;" />
</a>
<p>We can now go on with the next step which is merge all nodes into a single layer “all_nodes_444.geojson”, by clicking
on “Merge All Nodes”. Once this is done, we are ready for the last step that is the cleaning of nodes from different
settings that might clash (either be too close from one another or overlap). This final operation might take some time
because we need to check every node against all nodes present in a certain radius.</p>
<p>After the cleaning process is done, we have a layer containing all nodes that render coherent settings, without clashes.</p>
<a class="reference internal image-reference" href="_images/all_nodes.png"><img alt="Description of the image" class="align-center" src="_images/all_nodes.png" style="width: 700px;" />
</a>
<p><strong>NB:</strong> The demo data is provided following a “Europe-fixed” frame, which explains why it differs from other sources. We
strongly advise not using the demo data for any other purposes outside of testing this plugin.</p>
</section>
<section id="interpolate-raster">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Interpolate Raster</a><a class="headerlink" href="#interpolate-raster" title="Link to this heading">¶</a></h3>
<p>This last phase takes the cleaned input nodes and performs an interpolation using the QGIS Triangulated Irregular
Network (TIN) method, using each node synthetic elevation value.</p>
<p>Click on the last icon “Interpolate Raster”, a new dialog will open:</p>
<a class="reference internal image-reference" href="_images/interpolate_raster.png"><img alt="Description of the image" class="align-center" src="_images/interpolate_raster.png" style="width: 400px;" />
</a>
<p>As per the last phase, a few steps are required here. First, click on “Create Age List from Nodes” will search the
output folder for all nodes layer and return the available ages. L</p>
<p>ike we did before, select the 444 Ma age and click on “Interpolate Raster”. This step will perform a few tasks before
doing the interpolation itself, including remove any duplicate geometries and reproject the nodes layer into ESRI:54034
projection - World Cylindrical Equal Area (WCEA).</p>
<p>The reprojection is done on the nodes layer rather than on the raster because it reduces uncertainties when calculating
the volume of oceans later, which requires metric units and pixels with equal area.</p>
<p>Finally, once the raster is interpolated, no-data pixels are filled. As other methods such as Inverse Distance Weighted
(IDW) or Nearest neighbour (NN) produce a significant amount of no-data pixels, the TIN method only shows no-data pixels
on the corners of the map.</p>
<a class="reference internal image-reference" href="_images/int_raster_map_1.png"><img alt="Description of the image" class="align-center" src="_images/int_raster_map_1.png" style="width: 700px;" />
</a>
<p>We are now able to calculate the oceanic volume (simplified as being the volume below elevation = 0m) and compare it
with the current oceanic volume calculated using ETOPO 2022 data, which is used as a reference. This will inform us
about the required sea-level increase (or decrease) needed to reach the reference volume.</p>
<p>This change in sea-level must then be accounted for, as the water load (added or removed) will impact the elevation. For
this, click on “Correct Water Load”. Once the water load is accounted for, the nodes layer will be updated with a new
elevation value “Z_WLC”. In our case, the corrected sea-level equals to 78m above present-day, and will be added to all
nodes.</p>
<p>Finally, by clicking on “Interpolate Final Raster”, a final raster will be created using the same method as before (QGIS
TIN), based on the water load corrected elevation, with filling of no-data pixels.</p>
<a class="reference internal image-reference" href="_images/int_raster_map_2.png"><img alt="Description of the image" class="align-center" src="_images/int_raster_map_2.png" style="width: 700px;" />
</a>
</section>
</section>
<section id="contributing">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Contributing</a><a class="headerlink" href="#contributing" title="Link to this heading">¶</a></h2>
<p>To contribute:</p>
<ol class="arabic simple">
<li><p>Fork the repository</p></li>
<li><p>Make changes</p></li>
<li><p>Submit a pull request</p></li>
</ol>
</section>
<section id="license">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">License</a><a class="headerlink" href="#license" title="Link to this heading">¶</a></h2>
<p>This plugin is licensed under the GNU General Public License, version 2 or later (GPLv2+).
See the TopoChronia <a class="reference external" href="https://github.com/florianfranz/topo_chronia/blob/master/LICENSE.txt">LICENSE</a> for details.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">TopoChronia</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Florian Franziskakis, Christian Vérard, Grégory Giuliani.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>